

<div class="p-4">
  <section class="statistics mt-4 d-flex">
    <%== pagy_bootstrap_nav @pagy %>
    <%= link_to "Export to excel", admin_export_excel_index_path(format: :xlsx) %>
    <div class="dropdown mb-4">
      <%= form_tag(admin_static_pages_path, method: :get) do %>
        <%= select_tag :status_filter, options_for_select(Booking.statuses.map { |key, value| [t("admin.statuses.#{key}"), value] }, @status_filter), include_blank: true, class: "form-control" %>
        <%= submit_tag t("admin.filter"), class: "btn btn-primary" %>
      <% end %>
    </div>
    <div class="box d-flex rounded-2 align-items-center mb-4 mt-4">
      <div class="content rounded-3 p-3">
        <ul class="order-list">
          <% @bookings.each do |booking| %>
            <li class="order-item d-flex">
              <span class="order-name"><%= "Booking Name: #{booking.user.full_name}" %></span>
              <span class="order-day"><%= "Booking Day: #{booking.booked_date}" %></span>
              <span class="order-time"><%= "Start time: #{booking.start_time}, End time: #{booking.end_time}" %></span>
              <span class="order-field_type_name"><%= "Field name #{booking.field_type_name}" %></span>
              <div class=" dropdown zindex-dropdown">
                <a class="btn dropdown-toggle text-white" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Action
                </a>
                <div class="dropdown-menu z-1" aria-labelledby="dropdownMenu2">
                  <% if booking.status == 1 %>
                    <%= button_to t("admin.static_pages.accept"), admin_static_page_path(booking), method: :patch, class: "dropdown-item" %>
                    <%= button_to t("admin.static_pages.reject"), cancel_admin_static_page_path(booking), method: :patch, class: "dropdown-item" %>
                  <% elsif booking.status == 2 %>
                    <%= button_to "Pending", pending_admin_static_page_path(booking), method: :patch, class: "dropdown-item" %>
                    <%= button_to t("admin.static_pages.reject"), cancel_admin_static_page_path(booking), method: :patch, class: "dropdown-item" %>
                  <% else %>
                    <%= button_to "Pending", pending_admin_static_page_path(booking), method: :patch, class: "dropdown-item" %>
                    <%= button_to t("admin.static_pages.accept"), admin_static_page_path(booking), method: :patch, class: "dropdown-item" %>
                  <%end %>
                </div>
              </div>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </section>
</div>
